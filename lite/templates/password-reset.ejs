<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Réinitialisation de votre mot de passe</title>
    <style>
        body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; }
        .container { max-width: 600px; margin: 0 auto; padding: 20px; }
        .header { background: #34495e; color: white; padding: 20px; text-align: center; border-radius: 8px 8px 0 0; }
        .content { background: #ecf0f1; padding: 30px; border-radius: 0 0 8px 8px; }
        .security-info { background: #e8f5e8; border: 1px solid #27ae60; padding: 15px; border-radius: 4px; margin: 20px 0; }
        .warning { background: #ffeaa7; border: 1px solid #fdcb6e; padding: 15px; border-radius: 4px; margin: 20px 0; }
        .button { display: inline-block; background: #3498db; color: white; padding: 15px 30px; text-decoration: none; border-radius: 4px; margin: 20px 0; font-weight: bold; }
        .footer { text-align: center; margin-top: 20px; font-size: 12px; color: #666; }
        .reset-code { background: white; padding: 20px; border-radius: 4px; margin: 20px 0; border-left: 4px solid #3498db; text-align: center; }
        .code { font-family: monospace; font-size: 1.5em; font-weight: bold; color: #2c3e50; letter-spacing: 2px; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🔐 Réinitialisation de mot de passe</h1>
        </div>
        
        <div class="content">
            <p>Bonjour,</p>
            
            <p>Nous avons reçu une demande de réinitialisation de mot de passe pour votre compte.</p>
            
            <% if (resetLink) { %>
            <div class="security-info">
                <h3>🔗 Lien de réinitialisation</h3>
                <p>Cliquez sur le bouton ci-dessous pour réinitialiser votre mot de passe :</p>
                <p style="text-align: center;">
                    <a href="<%= resetLink %>" class="button">Réinitialiser mon mot de passe</a>
                </p>
                <p><strong>⏰ Ce lien expire dans <%= expirationTime || '24 heures' %>.</strong></p>
            </div>
            <% } %>
            
            <% if (resetCode) { %>
            <div class="reset-code">
                <h3>🔢 Code de vérification</h3>
                <p>Utilisez ce code pour réinitialiser votre mot de passe :</p>
                <div class="code"><%= resetCode %></div>
                <p><strong>⏰ Ce code expire dans <%= expirationTime || '15 minutes' %>.</strong></p>
            </div>
            <% } %>
            
            <% if (userData && userData.email) { %>
            <p><strong>Compte concerné :</strong> <%= userData.email %></p>
            <% } %>
            
            <% if (userData && userData.lastLogin) { %>
            <p><strong>Dernière connexion :</strong> <%= new Date(userData.lastLogin).toLocaleDateString('fr-FR', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric', hour: '2-digit', minute: '2-digit' }) %></p>
            <% } %>
            
            <% if (userData && userData.ipAddress) { %>
            <p><strong>Demande effectuée depuis :</strong> <%= userData.ipAddress %></p>
            <% } %>
            
            <% if (userData && userData.userAgent) { %>
            <p><strong>Navigateur :</strong> <%= userData.userAgent %></p>
            <% } %>
            
            <div class="warning">
                <h3>⚠️ Mesures de sécurité</h3>
                <ul>
                    <li>🚫 <strong>Si vous n'avez pas demandé cette réinitialisation</strong>, ignorez ce message et contactez immédiatement notre support</li>
                    <li>🔒 <strong>Ne partagez jamais</strong> ce lien ou ce code avec qui que ce soit</li>
                    <li>⏰ <strong>Utilisez ce lien/code rapidement</strong> car il expire bientôt</li>
                    <li>🖥️ <strong>Utilisez un appareil sécurisé</strong> pour effectuer la réinitialisation</li>
                </ul>
            </div>
            
            <h3>📋 Étapes suivantes</h3>
            <ol>
                <% if (resetLink) { %>
                <li>Cliquez sur le lien de réinitialisation ci-dessus</li>
                <% } %>
                <% if (resetCode) { %>
                <li>Saisissez le code de vérification sur la page de réinitialisation</li>
                <% } %>
                <li>Créez un nouveau mot de passe sécurisé</li>
                <li>Confirmez votre nouveau mot de passe</li>
                <li>Connectez-vous avec vos nouveaux identifiants</li>
            </ol>
            
            <div class="security-info">
                <h3>💡 Conseils pour un mot de passe sécurisé</h3>
                <ul>
                    <li>✅ Au moins 12 caractères</li>
                    <li>✅ Mélange de majuscules et minuscules</li>
                    <li>✅ Chiffres et caractères spéciaux</li>
                    <li>✅ Unique et non utilisé ailleurs</li>
                    <li>✅ Évitez les informations personnelles</li>
                </ul>
            </div>
            
            <% if (supportContact) { %>
            <h3>🆘 Besoin d'aide ?</h3>
            <p>Si vous rencontrez des difficultés, contactez notre équipe support :</p>
            <ul>
                <% if (supportContact.email) { %>
                <li>📧 Email : <a href="mailto:<%= supportContact.email %>"><%= supportContact.email %></a></li>
                <% } %>
                <% if (supportContact.phone) { %>
                <li>📞 Téléphone : <%= supportContact.phone %></li>
                <% } %>
                <% if (supportContact.hours) { %>
                <li>🕒 Horaires : <%= supportContact.hours %></li>
                <% } %>
            </ul>
            <% } %>
            
            <p>Pour votre sécurité, ce message a été envoyé automatiquement. Si vous n'avez pas demandé cette réinitialisation, veuillez nous contacter immédiatement.</p>
            
            <p>Cordialement,<br>
            <strong>L'équipe Sécurité</strong></p>
        </div>
        
        <div class="footer">
            <p><strong>Réinitialisation de mot de passe - Message automatique</strong></p>
            <p>© <%= new Date().getFullYear() %> - Système de sécurité automatique</p>
            <p>Ce message a été envoyé automatiquement, merci de ne pas répondre directement.</p>
            <% if (userData && userData.requestId) { %>
            <p>ID de demande : <%= userData.requestId %></p>
            <% } %>
        </div>
    </div>
</body>
</html>