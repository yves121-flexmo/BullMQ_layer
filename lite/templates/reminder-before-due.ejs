<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rappel - √âch√©ance de remboursement</title>
    <style>
        body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; }
        .container { max-width: 600px; margin: 0 auto; padding: 20px; }
        .header { background: #FF9800; color: white; padding: 20px; text-align: center; border-radius: 8px 8px 0 0; }
        .content { background: #fff3cd; padding: 30px; border: 1px solid #ffeaa7; border-radius: 0 0 8px 8px; }
        .alert { background: #fff3cd; border: 1px solid #ffeaa7; padding: 15px; border-radius: 4px; margin: 20px 0; }
        .reimbursement-details { background: white; padding: 20px; border-radius: 4px; margin: 20px 0; border-left: 4px solid #FF9800; }
        .button { display: inline-block; background: #FF9800; color: white; padding: 12px 24px; text-decoration: none; border-radius: 4px; margin: 20px 0; }
        .footer { text-align: center; margin-top: 20px; font-size: 12px; color: #666; }
        .urgency-high { color: #e74c3c; font-weight: bold; }
        .urgency-medium { color: #f39c12; font-weight: bold; }
        .urgency-low { color: #27ae60; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>‚è∞ Rappel d'√©ch√©ance</h1>
        </div>
        
        <div class="content">
            <% if (recipient && recipient.name) { %>
            <p>Bonjour <strong><%= recipient.name %></strong>,</p>
            <% } else { %>
            <p>Bonjour,</p>
            <% } %>
            
            <div class="alert">
                <% if (daysInfo && daysInfo.remainingDays <= 1) { %>
                <p class="urgency-high">üö® <strong>URGENT :</strong> Votre remboursement arrive √† √©ch√©ance <strong>demain</strong> !</p>
                <% } else if (daysInfo && daysInfo.remainingDays <= 3) { %>
                <p class="urgency-high">‚ö†Ô∏è <strong>ATTENTION :</strong> Votre remboursement arrive √† √©ch√©ance dans <strong><%= daysInfo.remainingDays %> jours</strong>.</p>
                <% } else if (daysInfo && daysInfo.remainingDays <= 7) { %>
                <p class="urgency-medium">üìÖ Votre remboursement arrive √† √©ch√©ance dans <strong><%= daysInfo.remainingDays %> jours</strong>.</p>
                <% } else { %>
                <p class="urgency-low">üìã Rappel : Votre remboursement arrive √† √©ch√©ance dans <strong><%= daysInfo.remainingDays %> jours</strong>.</p>
                <% } %>
            </div>
            
            <% if (reimbursement) { %>
            <div class="reimbursement-details">
                <h3>üìÑ D√©tails du remboursement</h3>
                
                <% if (reimbursement.id) { %>
                <p><strong>R√©f√©rence :</strong> <%= reimbursement.id %></p>
                <% } %>
                
                <% if (reimbursement.type) { %>
                <p><strong>Type :</strong> <%= reimbursement.type === 'SALARY' ? 'Salaire' : reimbursement.type === 'TREASURY' ? 'Tr√©sorerie' : reimbursement.type %></p>
                <% } %>
                
                <% if (reimbursement.amount) { %>
                <p><strong>Montant :</strong> <span style="font-size: 1.2em; color: #2196F3;"><%= reimbursement.amount.toLocaleString('fr-FR') %>‚Ç¨</span></p>
                <% } %>
                
                <% if (reimbursement.dueDate) { %>
                <p><strong>Date d'√©ch√©ance :</strong> <span style="color: #e74c3c;"><%= new Date(reimbursement.dueDate).toLocaleDateString('fr-FR', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' }) %></span></p>
                <% } %>
                
                <% if (reimbursement.description) { %>
                <p><strong>Description :</strong> <%= reimbursement.description %></p>
                <% } %>
                
                <% if (reimbursement.beneficiary) { %>
                <p><strong>B√©n√©ficiaire :</strong> <%= reimbursement.beneficiary %></p>
                <% } %>
                
                <% if (reimbursement.globalStatus) { %>
                <p><strong>Statut :</strong> 
                    <% if (reimbursement.globalStatus === 'PENDING') { %>
                    <span style="color: #f39c12;">üü° En attente</span>
                    <% } else if (reimbursement.globalStatus === 'OVERDUE') { %>
                    <span style="color: #e74c3c;">üî¥ En retard</span>
                    <% } else { %>
                    <span><%= reimbursement.globalStatus %></span>
                    <% } %>
                </p>
                <% } %>
            </div>
            <% } %>
            
            <h3>üìã Actions requises</h3>
            <ul>
                <li>‚úÖ V√©rifiez les d√©tails du remboursement</li>
                <li>üí∞ Pr√©parez le paiement</li>
                <li>üìß Confirmez la r√©ception de ce rappel</li>
                <% if (daysInfo && daysInfo.remainingDays <= 3) { %>
                <li>üö® <strong>Contactez imm√©diatement votre responsable financier</strong></li>
                <% } %>
            </ul>
            
            <% if (reimbursement && reimbursement.paymentUrl) { %>
            <p style="text-align: center;">
                <a href="<%= reimbursement.paymentUrl %>" class="button">Effectuer le paiement</a>
            </p>
            <% } %>
            
            <% if (reimbursement && reimbursement.contactUrl) { %>
            <p style="text-align: center;">
                <a href="<%= reimbursement.contactUrl %>" class="button" style="background: #2196F3;">Contacter le support</a>
            </p>
            <% } %>
            
            <div class="alert">
                <p><strong>‚ö†Ô∏è Important :</strong> Ce rappel est automatique. Si vous avez d√©j√† effectu√© le paiement, veuillez ignorer ce message.</p>
            </div>
            
            <p>Pour toute question ou assistance, n'h√©sitez pas √† contacter notre √©quipe finance.</p>
            
            <p>Cordialement,<br>
            <strong>L'√©quipe Finance</strong></p>
        </div>
        
        <div class="footer">
            <p>¬© <%= new Date().getFullYear() %> - Syst√®me de rappels automatique</p>
            <p>Ce message a √©t√© envoy√© automatiquement, merci de ne pas r√©pondre directement.</p>
        </div>
    </div>
</body>
</html>